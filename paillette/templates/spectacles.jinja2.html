{% set title = 'Spectacles' %}

{% extends '_layout.jinja2' %}

{% block content %}
  <h2>{{ title }}</h2>

  <ul>
    <li><a href="{{ url_for('spectacles', year=previous.year, month=previous.month) }}">Mois précédent</a></li>
    <li>{{ start.strftime('%B %Y') | capitalize }}</li>
    <li><a href="{{ url_for('spectacles', year=next.year, month=next.month) }}">Mois suivant</a></li>
  </ul>

  <ul class="actions">
    <li><a href="{{ url_for('spectacle_create') }}">Ajouter un spectacle</a></li>
  </ul>

  {% for spectacle in spectacles %}
    {% set dates = (spectacle.first_date, spectacle.last_date) | date_range %}
    <section>
      <h3><a href="{{ url_for('spectacle', spectacle_id=spectacle.id) }}">{{ '{}, {}'.format(spectacle.place, dates) }}</a></h3>
      <dl>
        <dt>Date</dt>
        <dd>{{ dates | capitalize }}</dd>
        <dt>Lieu</dt>
        <dd>{{ spectacle.place }}</dd>
        <dt>Évènement</dt>
        <dd>{{ spectacle.event }}</dd>
        <dt>Temps de transport</dt>
        <dd>{{ spectacle.travel_time }}</dd>
      </dl>
    </section>
  {% endfor %}
{% endblock %}
